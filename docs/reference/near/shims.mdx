---
title: NEAR Shims
description: Convert SDK transactions for near-kit and @near-js/*
---

## Import

```typescript
import { 
  toNearKitTransaction, 
  toNearApiJsActions,
  sendWithNearApiJs 
} from "@omni-bridge/near"
```

## toNearKitTransaction

Converts an unsigned transaction to a near-kit transaction builder.

### Signature

```typescript
function toNearKitTransaction(
  near: Near,
  unsigned: NearUnsignedTransaction
): TransactionBuilder
```

### Parameters

<ResponseField name="near" type="Near" required>
  A near-kit `Near` instance.
</ResponseField>

<ResponseField name="unsigned" type="NearUnsignedTransaction" required>
  The unsigned transaction from the builder.
</ResponseField>

### Returns

A near-kit `TransactionBuilder` that can be sent with `.send()`.

### Example

```typescript
import { Near } from "near-kit"
import { createNearBuilder, toNearKitTransaction } from "@omni-bridge/near"

const near = new Near({ 
  network: "mainnet", 
  privateKey: "ed25519:..." 
})
const nearBuilder = createNearBuilder({ network: "mainnet" })

const unsigned = nearBuilder.buildTransfer(validated, "alice.near")
const result = await toNearKitTransaction(near, unsigned).send()
```

## toNearApiJsActions

Converts actions to @near-js/transactions format.

### Signature

```typescript
function toNearApiJsActions(
  unsigned: NearUnsignedTransaction
): Action[]
```

### Example

```typescript
import { toNearApiJsActions } from "@omni-bridge/near"

const actions = toNearApiJsActions(unsigned)

await account.signAndSendTransaction({
  receiverId: unsigned.receiverId,
  actions,
})
```

## sendWithNearApiJs

Helper that sends a transaction using @near-js/accounts.

### Signature

```typescript
function sendWithNearApiJs(
  account: Account,
  unsigned: NearUnsignedTransaction
): Promise<FinalExecutionOutcome>
```

### Parameters

<ResponseField name="account" type="Account" required>
  A @near-js/accounts `Account` instance.
</ResponseField>

<ResponseField name="unsigned" type="NearUnsignedTransaction" required>
  The unsigned transaction from the builder.
</ResponseField>

### Example

```typescript
import { Account } from "@near-js/accounts"
import { JsonRpcProvider } from "@near-js/providers"
import { InMemoryKeyStore } from "@near-js/keystores"
import { KeyPair } from "@near-js/crypto"
import { InMemorySigner } from "@near-js/signers"
import { sendWithNearApiJs } from "@omni-bridge/near"

const keyStore = new InMemoryKeyStore()
await keyStore.setKey("mainnet", "alice.near", KeyPair.fromString("ed25519:..."))
const provider = new JsonRpcProvider({ url: "https://rpc.mainnet.near.org" })
const signer = new InMemorySigner(keyStore)
const account = new Account({ accountId: "alice.near", provider, signer })

const unsigned = nearBuilder.buildTransfer(validated, "alice.near")
const result = await sendWithNearApiJs(account, unsigned)
```

## Transaction Format

The SDK returns this format:

```typescript
interface NearUnsignedTransaction {
  type: "near"
  signerId: string
  receiverId: string
  actions: NearAction[]
}

interface NearAction {
  type: "FunctionCall"
  methodName: string
  args: Uint8Array
  gas: bigint
  deposit: bigint
}
```

Shims handle:
- Fetching the current nonce
- Getting the latest block hash
- Converting action formats
- Signing and broadcasting

## Related

- [createNearBuilder](/reference/near/create-builder)
- [Storage Deposits](/reference/near/storage-deposits)
- [NEAR Transfers Guide](/guides/near-transfers)
