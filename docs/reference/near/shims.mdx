---
title: NEAR Shims
description: Convert SDK transactions for near-kit and near-api-js
---

NEAR transactions require runtime context (nonce, block hash) that the SDK doesn't fetch. Shims convert the library-agnostic transaction format for specific NEAR libraries.

## Import

```typescript
import { 
  toNearKitTransaction, 
  toNearApiJsActions,
  sendWithNearApiJs 
} from "@omni-bridge/near"
```

## toNearKitTransaction

Converts an unsigned transaction to a near-kit transaction builder.

### Signature

```typescript
function toNearKitTransaction(
  near: Near,
  unsigned: NearUnsignedTransaction
): TransactionBuilder
```

### Parameters

<ResponseField name="near" type="Near" required>
  A near-kit `Near` instance.
</ResponseField>

<ResponseField name="unsigned" type="NearUnsignedTransaction" required>
  The unsigned transaction from the builder.
</ResponseField>

### Returns

A near-kit `TransactionBuilder` that can be sent with `.send()`.

### Example

```typescript
import { Near } from "near-kit"
import { createNearBuilder, toNearKitTransaction } from "@omni-bridge/near"

const near = new Near({ 
  network: "mainnet", 
  privateKey: "ed25519:..." 
})
const nearBuilder = createNearBuilder({ network: "mainnet" })

const unsigned = nearBuilder.buildTransfer(validated, "alice.near")
const result = await toNearKitTransaction(near, unsigned).send()
```

## toNearApiJsActions

Converts actions to near-api-js format.

### Signature

```typescript
function toNearApiJsActions(
  unsigned: NearUnsignedTransaction
): Action[]
```

### Example

```typescript
import { toNearApiJsActions } from "@omni-bridge/near"

const actions = toNearApiJsActions(unsigned)

await account.signAndSendTransaction({
  receiverId: unsigned.receiverId,
  actions,
})
```

## sendWithNearApiJs

Helper that sends a transaction using near-api-js.

### Signature

```typescript
function sendWithNearApiJs(
  account: Account,
  unsigned: NearUnsignedTransaction
): Promise<FinalExecutionOutcome>
```

### Parameters

<ResponseField name="account" type="Account" required>
  A near-api-js `Account` instance.
</ResponseField>

<ResponseField name="unsigned" type="NearUnsignedTransaction" required>
  The unsigned transaction from the builder.
</ResponseField>

### Example

```typescript
import { connect } from "near-api-js"
import { sendWithNearApiJs } from "@omni-bridge/near"

const near = await connect({
  networkId: "mainnet",
  nodeUrl: "https://rpc.mainnet.near.org",
  keyStore,
})
const account = await near.account("alice.near")

const unsigned = nearBuilder.buildTransfer(validated, "alice.near")
const result = await sendWithNearApiJs(account, unsigned)
```

## Transaction Format

The SDK returns this format:

```typescript
interface NearUnsignedTransaction {
  type: "near"
  signerId: string
  receiverId: string
  actions: NearAction[]
}

interface NearAction {
  type: "FunctionCall"
  methodName: string
  args: Uint8Array
  gas: bigint
  deposit: bigint
}
```

Shims handle:
- Fetching the current nonce
- Getting the latest block hash
- Converting action formats
- Signing and broadcasting

## Related

- [createNearBuilder](/reference/near/create-builder)
- [Storage Deposits](/reference/near/storage-deposits)
- [NEAR Transfers Guide](/guides/near-transfers)
