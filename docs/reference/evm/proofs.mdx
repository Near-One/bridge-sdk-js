---
title: EVM Proofs
description: Generate Merkle proofs for EVM transactions
---

# EVM Proofs

Generate Merkle proofs for cross-chain verification of EVM transactions.

## Import

```typescript
import { getEvmProof, parseInitTransferEvent, getInitTransferTopic } from "@omni-bridge/evm"
```

## getEvmProof

Generates a Merkle proof for an EVM transaction.

### Signature

```typescript
function getEvmProof(
  txHash: Hex,
  topic: Hex,
  chain: EvmChainKind,
  network: Network,
  customRpcUrl?: string
): Promise<EvmProof>
```

### Parameters

<ResponseField name="txHash" type="Hex" required>
  The transaction hash.
</ResponseField>

<ResponseField name="topic" type="Hex" required>
  The event topic to prove.
</ResponseField>

<ResponseField name="chain" type="EvmChainKind" required>
  The EVM chain.
</ResponseField>

<ResponseField name="network" type="Network" required>
  The network ("mainnet" or "testnet").
</ResponseField>

<ResponseField name="customRpcUrl" type="string">
  Optional custom RPC URL.
</ResponseField>

### Returns

```typescript
interface EvmProof {
  log_index: bigint
  log_entry_data: Uint8Array
  receipt_index: bigint
  receipt_data: Uint8Array
  header_data: Uint8Array
  proof: Uint8Array[]
}
```

### Example

```typescript
import { getEvmProof, getInitTransferTopic } from "@omni-bridge/evm"
import { ChainKind } from "@omni-bridge/core"

const proof = await getEvmProof(
  "0x...", // transaction hash
  getInitTransferTopic(),
  ChainKind.Eth,
  "mainnet"
)
```

## parseInitTransferEvent

Parses the InitTransfer event from transaction logs.

### Signature

```typescript
function parseInitTransferEvent(logs: readonly LogEntry[]): EvmInitTransferEvent
```

### Returns

```typescript
interface EvmInitTransferEvent {
  sender: string
  tokenAddress: string
  originNonce: bigint
  amount: bigint
  fee: bigint
  nativeTokenFee: bigint
  recipient: string
  message: string
}
```

### Example

```typescript
import { parseInitTransferEvent } from "@omni-bridge/evm"

const receipt = await publicClient.getTransactionReceipt({ hash: txHash })
const event = parseInitTransferEvent(receipt.logs)

console.log(`Nonce: ${event.originNonce}`)
console.log(`Amount: ${event.amount}`)
```

## getInitTransferTopic

Gets the topic hash for the InitTransfer event.

```typescript
const topic = getInitTransferTopic()
// "0x..."
```

## Use Cases

### Manual finalization on NEAR

```typescript
import { getEvmProof, getInitTransferTopic, parseInitTransferEvent } from "@omni-bridge/evm"
import { createNearBuilder } from "@omni-bridge/near"

// After EVM transfer
const receipt = await publicClient.getTransactionReceipt({ hash: txHash })
const event = parseInitTransferEvent(receipt.logs)

// Generate proof
const proof = await getEvmProof(
  txHash,
  getInitTransferTopic(),
  ChainKind.Eth,
  "mainnet"
)

// Finalize on NEAR
const nearBuilder = createNearBuilder({ network: "mainnet" })
const finalizeTx = nearBuilder.buildFinalization({
  sourceChain: ChainKind.Eth,
  evmProof: {
    proof_kind: "InitTransfer",
    proof,
  },
  storageDepositActions: [],
  signerId: "finalizer.near",
})
```

## Related

- [EVM Transfers Guide](/guides/evm-transfers)
- [Tracking Transfers](/guides/tracking-transfers)
