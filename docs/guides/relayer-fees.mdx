---
title: Relayer Fees
description: Use relayers for automatic transfer finalization
---

## How It Works

Without relayers:
1. Initiate transfer on source chain
2. **Manually** finalize on destination chain

With relayers:
1. Initiate transfer on source chain (with fee)
2. Relayer automatically finalizes for you

## Getting Fee Quotes

Use the API client to get current fee quotes:

```typescript
import { BridgeAPI } from "@omni-bridge/core"

const api = new BridgeAPI("mainnet")

const fee = await api.getFee(
  "eth:0xSenderAddress...",           // sender
  "near:recipient.near",               // recipient
  "eth:0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",  // token (USDC)
  1000000n                             // amount
)

console.log({
  tokenFee: fee.transferred_token_fee,  // Fee in transfer token
  nativeFee: fee.native_token_fee,      // Fee in native token (ETH)
})
```

## Including Fees in Transfers

Pass the fee values to `validateTransfer()`:

```typescript
import { createBridge, ChainKind } from "@omni-bridge/core"
import { createEvmBuilder } from "@omni-bridge/evm"

const bridge = createBridge({ network: "mainnet" })
const evm = createEvmBuilder({ network: "mainnet", chain: ChainKind.Eth })
const api = new BridgeAPI("mainnet")

// Get fee quote
const fee = await api.getFee(
  "eth:0xSender...",
  "near:recipient.near",
  "eth:0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
  1000000n
)

// Validate with fees
const validated = await bridge.validateTransfer({
  token: "eth:0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
  amount: 1000000n,
  fee: BigInt(fee.transferred_token_fee),      // Deducted from amount
  nativeFee: BigInt(fee.native_token_fee),     // Paid in ETH
  sender: "eth:0xSender...",
  recipient: "near:recipient.near",
})

// Build and send
const tx = evm.buildTransfer(validated)
await walletClient.sendTransaction(tx)
```

## Fee Types

<ResponseField name="transferred_token_fee" type="string">
  Fee paid in the token being transferred. This is deducted from the amount, so the recipient receives `amount - fee`.
</ResponseField>

<ResponseField name="native_token_fee" type="string">
  Fee paid in the source chain's native token (ETH, NEAR, SOL). This is paid in addition to gas fees.
</ResponseField>

## Fee Calculation

Fees are calculated based on:
- **Source chain**: Different chains have different gas costs
- **Destination chain**: Finalization costs vary
- **Token**: Some tokens may have higher fees
- **Amount**: Fees may be percentage-based for larger transfers

<Note>
  Fee quotes are valid for a limited time. For large transfers, fetch a fresh quote immediately before sending.
</Note>

## Example: All Chains

<Tabs>
  <Tab title="EVM → NEAR">
    ```typescript
    const fee = await api.getFee(
      "eth:0xSender...",
      "near:recipient.near",
      "eth:0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
      1000000n
    )

    const validated = await bridge.validateTransfer({
      token: "eth:0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
      amount: 1000000n,
      fee: BigInt(fee.transferred_token_fee),
      nativeFee: BigInt(fee.native_token_fee),
      sender: "eth:0xSender...",
      recipient: "near:recipient.near",
    })
    ```
  </Tab>

  <Tab title="NEAR → EVM">
    ```typescript
    const fee = await api.getFee(
      "near:sender.near",
      "eth:0xRecipient...",
      "near:wrap.near",
      1000000000000000000000000n
    )

    const validated = await bridge.validateTransfer({
      token: "near:wrap.near",
      amount: 1000000000000000000000000n,
      fee: BigInt(fee.transferred_token_fee),
      nativeFee: BigInt(fee.native_token_fee),
      sender: "near:sender.near",
      recipient: "eth:0xRecipient...",
    })
    ```
  </Tab>

  <Tab title="Solana → NEAR">
    ```typescript
    const fee = await api.getFee(
      "sol:SenderPublicKey...",
      "near:recipient.near",
      "sol:EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
      1000000n
    )

    const validated = await bridge.validateTransfer({
      token: "sol:EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
      amount: 1000000n,
      fee: BigInt(fee.transferred_token_fee),
      nativeFee: BigInt(fee.native_token_fee),
      sender: "sol:SenderPublicKey...",
      recipient: "near:recipient.near",
    })
    ```
  </Tab>
</Tabs>

## Without Relayer Fees

If you set `fee: 0n` and `nativeFee: 0n`, you'll need to finalize manually:

```typescript
// Source chain: Initiate transfer
const validated = await bridge.validateTransfer({
  // ...
  fee: 0n,
  nativeFee: 0n,
})
const tx = evm.buildTransfer(validated)
await walletClient.sendTransaction(tx)

// Later: Manual finalization on destination
// (Requires proof generation and another transaction)
```

<Warning>
  Manual finalization requires understanding the proof system for each chain (EVM Merkle proofs, Wormhole VAAs). For most use cases, relayer fees are recommended.
</Warning>

## UI Considerations

When building a UI:

```typescript
// Fetch fee when user enters amount
const fee = await api.getFee(sender, recipient, token, amount)

// Show breakdown to user
const receiveAmount = amount - BigInt(fee.transferred_token_fee)

console.log(`
  Sending: ${formatUnits(amount, decimals)} USDC
  Fee: ${formatUnits(BigInt(fee.transferred_token_fee), decimals)} USDC
  Native fee: ${formatEther(BigInt(fee.native_token_fee))} ETH
  Recipient receives: ${formatUnits(receiveAmount, decimals)} USDC
`)
```

## Error Handling

```typescript
try {
  const fee = await api.getFee(sender, recipient, token, amount)
} catch (error) {
  if (error.message.includes("unsupported route")) {
    console.error("This transfer route is not supported")
  } else if (error.message.includes("amount too small")) {
    console.error("Amount too small for this transfer")
  } else {
    console.error("Failed to get fee quote:", error)
  }
}
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Tracking Transfers" icon="magnifying-glass" href="/guides/tracking-transfers">
    Monitor transfer status
  </Card>
  <Card title="API Reference" icon="code" href="/reference/core/api-client">
    Complete API client docs
  </Card>
</CardGroup>
