---
title: Tracking Transfers
description: Monitor the status of cross-chain transfers
---

## Setup

```typescript
import { BridgeAPI } from "@omni-bridge/core"

const api = new BridgeAPI("mainnet")
```

## Get Transfer Status

Track a transfer by its transaction hash:

```typescript
const statuses = await api.getTransferStatus({
  transactionHash: "0x1234..."
})

// Returns array of status strings the transfer has reached
console.log(statuses)
// ["Initialized", "Signed", "FinalisedOnNear", "Finalised"]

const latestStatus = statuses[statuses.length - 1]
console.log("Current status:", latestStatus)
```

Or by origin chain and nonce:

```typescript
const statuses = await api.getTransferStatus({
  originChain: "Eth",
  originNonce: 12345
})
```

## Transfer Statuses

Transfers progress through these statuses:

| Status | Description |
|--------|-------------|
| `Initialized` | Transfer initiated on source chain |
| `Signed` | MPC signature obtained |
| `FastFinalisedOnNear` | Fast finalized on NEAR (with relayer) |
| `FinalisedOnNear` | Finalized on NEAR |
| `FastFinalised` | Fast finalized on destination |
| `Finalised` | Fully finalized |
| `Claimed` | Tokens claimed by recipient |

```typescript
const statuses = await api.getTransferStatus({ transactionHash: hash })
const latestStatus = statuses[statuses.length - 1]

switch (latestStatus) {
  case "Initialized":
    console.log("Transfer started, waiting for finalization...")
    break
  case "FinalisedOnNear":
    console.log("Finalized on NEAR, waiting for destination chain...")
    break
  case "Finalised":
  case "Claimed":
    console.log("Transfer complete!")
    break
}
```

## Get Transfer Details

Fetch full transfer details including transaction info:

```typescript
const transfers = await api.getTransfer({
  transactionHash: "0x1234..."
})

const transfer = transfers[0]

// Access transfer message (sender, recipient, amount, fees)
if (transfer?.transfer_message) {
  console.log({
    token: transfer.transfer_message.token,
    amount: transfer.transfer_message.amount,
    sender: transfer.transfer_message.sender,
    recipient: transfer.transfer_message.recipient,
    fee: transfer.transfer_message.fee,
  })
}

// Access transaction details by stage
if (transfer?.initialized?.EVMLog) {
  console.log("Origin TX:", transfer.initialized.EVMLog.transaction_hash)
}
if (transfer?.finalised?.NearReceipt) {
  console.log("Destination TX:", transfer.finalised.NearReceipt.transaction_hash)
}
```

## Find Transfers

Search for transfers by sender or other criteria:

```typescript
// Find recent transfers from an address
const transfers = await api.findTransfers({
  sender: "eth:0x1234...",
  limit: 10
})

// Find by transaction ID
const transfers = await api.findTransfers({
  transactionId: "some-id"
})

// Pagination
const page2 = await api.findTransfers({
  sender: "eth:0x1234...",
  offset: 10,
  limit: 10
})
```

## Polling for Status

For real-time updates, poll the status endpoint:

```typescript
async function waitForCompletion(txHash: string, timeout = 300000) {
  const startTime = Date.now()
  
  while (Date.now() - startTime < timeout) {
    const statuses = await api.getTransferStatus({
      transactionHash: txHash
    })
    const latestStatus = statuses[statuses.length - 1]
    
    if (latestStatus === "Finalised" || latestStatus === "Claimed") {
      return latestStatus
    }
    
    // Wait 10 seconds before checking again
    await new Promise(resolve => setTimeout(resolve, 10000))
  }
  
  throw new Error("Transfer timeout")
}

// Usage
const result = await waitForCompletion(hash)
console.log("Transfer complete!", result)
```

## Get Allowlisted Tokens

Fetch all tokens supported by the bridge:

```typescript
const tokens = await api.getAllowlistedTokens()

// Returns: { "token_name": "eth:0x..." }
for (const [name, address] of Object.entries(tokens)) {
  console.log(`${name}: ${address}`)
}
```

## Complete Example

```typescript
import { createBridge, ChainKind, BridgeAPI } from "@omni-bridge/core"
import { createEvmBuilder } from "@omni-bridge/evm"

const bridge = createBridge({ network: "mainnet" })
const evm = createEvmBuilder({ network: "mainnet", chain: ChainKind.Eth })
const api = new BridgeAPI("mainnet")

// Initiate transfer
const validated = await bridge.validateTransfer({
  token: "eth:0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
  amount: 1000000n,
  fee: 0n,
  nativeFee: 0n,
  sender: "eth:0x...",
  recipient: "near:alice.near",
})

const tx = evm.buildTransfer(validated)
const hash = await walletClient.sendTransaction(tx)

// Track progress
console.log("Transfer initiated, tracking...")

let lastStatus = ""
while (true) {
  const statuses = await api.getTransferStatus({ transactionHash: hash })
  const latestStatus = statuses[statuses.length - 1]
  
  if (latestStatus !== lastStatus) {
    console.log(`Status: ${latestStatus}`)
    lastStatus = latestStatus
  }
  
  if (latestStatus === "Finalised" || latestStatus === "Claimed") {
    console.log("Transfer complete!")
    break
  }
  
  await new Promise(r => setTimeout(r, 15000))
}
```

## Error Handling

```typescript
try {
  const status = await api.getTransferStatus({ transactionHash: hash })
  
  if (status.length === 0) {
    console.log("Transfer not found - may still be processing")
  }
} catch (error) {
  if (error.message.includes("rate limit")) {
    console.log("Too many requests - slow down polling")
  } else {
    console.error("API error:", error)
  }
}
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Relayer Fees" icon="money-bill" href="/guides/relayer-fees">
    Automatic finalization with relayers
  </Card>
  <Card title="API Reference" icon="code" href="/reference/core/api-client">
    Complete API client documentation
  </Card>
</CardGroup>
